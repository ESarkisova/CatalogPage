"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var toggleClassHidden=function(e,t){e.classList.toggle("hidden"),e.nextElementSibling.classList.toggle("hidden"),t&&(e.nextElementSibling.children[0].value=t)},editName=function(e){var t=e.closest("[data-id]").getAttribute("data-id"),n=e.previousElementSibling.value,r=e.parentElement.previousElementSibling;n!=r.textContent?(e.classList.add("loading"),fetch("https://jsonplaceholder.typicode.com/posts/1").then(function(){r.textContent=n}).catch(function(e){console.error("Возникла ошибка при изменении имени товара ".concat(t,": ").concat(e))}).finally(function(){toggleClassHidden(e.parentElement.previousElementSibling),e.classList.remove("loading")})):toggleClassHidden(e.parentElement.previousElementSibling)},clickProductCard=function(e){var t=e.target;if(t.classList.contains("js-edit-name"))toggleClassHidden(t,t.textContent);else{if(!t.classList.contains("js-save-name"))return;editName(t)}};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".item__container");document.querySelector(".js-table-view").addEventListener("mouseenter",function(){return e.classList.add("item__container_table")}),document.querySelector(".js-table-view").addEventListener("mouseleave",function(){return e.classList.remove("item__container_table")});var t=document.querySelectorAll(".js-drag");[].forEach.call(t,function(i){i.onclick=clickProductCard,i.draggable=!0,i.ondragstart=function(e){var t=document.querySelector(".dragging");t&&t.classList.remove("dragging"),e.dataTransfer.setData("id",e.target.id),i.classList.add("dragging")},i.ondragover=function(e){var t=document.querySelector(".over");t&&t.classList.remove("over"),i.classList.add("over"),e.preventDefault()},i.ondragleave=function(e){var t=document.querySelector(".over");t&&t.classList.remove("over")},i.ondrop=function(e){var t=document.querySelector(".dragging");t&&t.classList.remove("dragging");var n=document.querySelector(".over");n&&n.classList.remove("over");var r=i.innerHTML,o=document.querySelector("#"+e.dataTransfer.getData("id")),a=o.innerHTML;o.innerHTML=r,i.innerHTML=a}})},!1);